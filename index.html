<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>預約跳轉中</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body style="text-align:center; padding-top:50px;">
    <div id="msg">正在連接 LINE，請稍候...</div>
    <script>
        // 確保網頁載入完成才執行
        window.onload = function() {
            liff.init({ liffId: "2009065757-yV5zsIQP" }) // 請確認 ID 前後沒有空格
                .then(() => {
                    if (!liff.isLoggedIn()) {
                        liff.login();
                    } else {
                        liff.getProfile().then(profile => {
                            const uid = profile.userId;
                            // 跳轉到 Tally
                            window.location.replace("https://tally.so/r/2EaWjb?line_uid=" + uid);
                        });
                    }
                })
                .catch((err) => {
                    document.getElementById("msg").innerHTML = "偵測到錯誤：" + err;
                });
        };
    </script>
</body>
</html>
